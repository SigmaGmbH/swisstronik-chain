version: "3"

services:
  localosmosis:
    image: local:osmosis
    volumes:
      - ./scripts/setup-osmosis.sh:/osmosis/setup.sh
      - $HOME/.osmosisd/:/osmosis/.osmosisd/
    entrypoint:
      - /osmosis/setup.sh
    env_file:
      - .env
    environment:
      - CHAIN_ID=${OSMOSIS_CHAIN_ID}
      - VALIDATOR_MONIKER=${OSMOSIS_VALIDATOR_MONIKER}
      - VALIDATOR_MNEMONIC=${OSMOSIS_VALIDATOR_MNEMONIC}
      - FAUCET_MNEMONIC=${OSMOSIS_FAUCET_MNEMONIC}
      - RELAYER_MNEMONIC=${OSMOSIS_RELAYER_MNEMONIC}
    ports:
      - 36657:26657
      - 31317:1317
      - 39090:9090
    networks:
      - localnet

  localosmosis-faucet:
    command:
      - start
      - localosmosis:26657
    image: confio/faucet:0.28.11
    environment:
      FAUCET_CONCURRENCY: 1
      FAUCET_MNEMONIC: "increase bread alpha rigid glide amused approve oblige print asset idea enact lawn proof unfold jeans rabbit audit return chuckle valve rather cactus great"
      FAUCET_PORT: 8000
      FAUCET_GAS_PRICE: 0.025uosmo
      FAUCET_PATH_PATTERN: "m/44'/118'/0'/0/a"
      FAUCET_ADDRESS_PREFIX: osmo
      FAUCET_TOKENS: uosmo,uion
      FAUCET_CREDIT_AMOUNT_UOSMO: 10000000 # 10 osmo
      FAUCET_CREDIT_AMOUNT_UION: 100000 # 0.1 ion
      FAUCET_REFILL_FACTOR: 8
      FAUCET_REFILL_THRESHOLD: 20
      FAUCET_COOLDOWN_TIME: 30 # 30s
    ports:
      - 8000:8000
    depends_on:
      - localosmosis
    networks:
      - localnet
      -
  localswisstronik:
    image: local:swisstronik
    volumes:
      - ./scripts/setup-swisstronik.sh:/swisstronik/setup.sh
      - $HOME/.swisstronik/:/swisstronik/.swisstronik/
    entrypoint:
      - /swisstronik/setup.sh
    env_file:
      - .env
    environment:
      - CHAIN_ID=${SWISSTRONIK_CHAIN_ID}
      - VALIDATOR_MONIKER=${SWISSTRONIK_VALIDATOR_MONIKER}
      - VALIDATOR_MNEMONIC=${SWISSTRONIK_VALIDATOR_MNEMONIC}
      - FAUCET_MNEMONIC=${SWISSTRONIK_FAUCET_MNEMONIC}
      - RELAYER_MNEMONIC=${SWISSTRONIK_RELAYER_MNEMONIC}
    ports:
      - 6657:26657
      - 1317:1317
      - 9090:9090
    networks:
      - localnet

networks:
  localnet:
